#include <iostream>
#include <vector>
#include <functional>
#include <stdio.h>
#include <string.h>

class What {
	public:
		What(int (*function)(const char *a)) {
			this->function = function;
		}
		char annoy[3];
		int (*function)(const char *a);
};

int funky_function(const char *a) {
	std::cout << "Jag hoppas du har det roligt! Du kan klara av den här uppgiften!" << std::endl;
	return 1;
}

int main() {
	What *what1 = new What(&funky_function);
	What *what2 = new What(&funky_function);
	
	printf("Här är ett värde som jag tycker är lite spännande: %p\n", malloc);

	std::string hemlis = "Q";
	std::string command = " ";
	while(std::cin >> command) {

		if(command == "allokera") {
			std::cout << "Hur mycket data vill du ha?" << std::endl;
			uint64_t length;
			std::cin >> length;
			void *data = malloc(length);
			memcpy(data, hemlis.c_str(), length);
		}

		if(command == "befria") {
			delete what1;
			delete what2;
		}

		if(command == "anropa") {
			what2->function(hemlis.c_str());
		}

		if(command == "fixahemlis") {
			std::cin >> hemlis;
		}
	}

	return 0;
}

# JSFS

Kanske att den här skulle passa i Webb för att det är Javascript??

En "shell" med ett "filsystem" ges. Om man skriver ett kommando som inte finns
så får man hela "minifierade" källkoden utskriven till sig som en del av
felmeddelandet.

Mappar i "filsystemet" representeras med `Map`par, men saker i dem sätts och
hämtas med `[]` istället för `.set`/`.get`, så det är som om vilket objekt som
helst används, alltså är prototype pollution en grej.

Själva REPL:en är implementerad som en otroligt kursed state/stack machine och
om `"writeflag"` finns i state:t så sparas flaggan till `file` i state:t. För
att `"writeflag"` ska sättas i state:t behöver man vanligtvis först skriva in
rätt lösenord som verifieras med en hash (det är något jättelångt jag febrilt
tryckte runt på skrivbordet för att få fram). Men om `"writeflag"` finns i
null-prototypen händer samma sak, så man kan skapa mappen
`__proto__/__proto__/writeflag` istället (`__proto__` blir `Map`s prototyp,
`__proto__/__proto__` blir null-prototypen).

Fullständig lösning:
```
write flagga hej
mkdir __proto__/__proto__/writeflag

cat flagga
```
(ja, det ska vara en tom rad innan `cat flagga`)

Notera att det kan vara lite farligt att ändra i koden; den minifieras och körs
genom `fold -sw1024` för att hela koden ska visas vid ett error, men `fold` kan
ta sönder programmet i vissa fall.
